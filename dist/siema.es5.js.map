{"version":3,"file":"siema.es5.js","sources":["../src/siema.js"],"sourcesContent":["/**\n * Hi :-) This is a class representing a Siema.\n */\nexport default class Siema {\n  /**\n   * Create a Siema.\n   * @param {Object} options - Optional settings object.\n   */\n  constructor(options) {\n    // Merge defaults with user's settings\n    this.config = Siema.mergeSettings(options);\n\n    // Resolve selector's type\n    this.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\n\n    // Early throw if selector doesn't exists\n    if (this.selector === null) {\n      throw new Error('Something wrong with your selector ðŸ˜­');\n    }\n\n    // update perPage number dependable of user value\n    this.resolveSlidesNumber();\n\n    // Create global references\n    this.selectorWidth = this.selector.offsetWidth;\n    this.innerElements = [].slice.call(this.selector.children);\n    this.currentSlide = this.config.loop ?\n      this.config.startIndex % this.innerElements.length :\n      Math.max(0, Math.min(this.config.startIndex, this.innerElements.length - this.perPage));\n    this.transformProperty = Siema.webkitOrNot();\n\n    // Bind all event handlers for referencability\n    ['resizeHandler', 'touchstartHandler', 'touchendHandler', 'touchmoveHandler', 'mousedownHandler', 'mouseupHandler', 'mouseleaveHandler', 'mousemoveHandler', 'clickHandler'].forEach(method => {\n      this[method] = this[method].bind(this);\n    });\n\n    // Build markup and apply required styling to elements\n    this.init();\n  }\n\n\n  /**\n   * Overrides default settings with custom ones.\n   * @param {Object} options - Optional settings object.\n   * @returns {Object} - Custom Siema settings.\n   */\n  static mergeSettings(options) {\n    const settings = {\n      selector: '.siema',\n      duration: 200,\n      easing: 'ease-out',\n      perPage: 1,\n      startIndex: 0,\n      draggable: true,\n      multipleDrag: true,\n      threshold: 20,\n      loop: false,\n      rtl: false,\n      onInit: () => {},\n      onChange: () => {},\n    };\n\n    const userSttings = options;\n    for (const attrname in userSttings) {\n      settings[attrname] = userSttings[attrname];\n    }\n\n    return settings;\n  }\n\n\n  /**\n   * Determine if browser supports unprefixed transform property.\n   * Google Chrome since version 26 supports prefix-less transform\n   * @returns {string} - Transform property supported by client.\n   */\n  static webkitOrNot() {\n    const style = document.documentElement.style;\n    if (typeof style.transform === 'string') {\n      return 'transform';\n    }\n    return 'WebkitTransform';\n  }\n\n  /**\n   * Attaches listeners to required events.\n   */\n  attachEvents() {\n    // Resize element on window resize\n    window.addEventListener('resize', this.resizeHandler);\n\n    // If element is draggable / swipable, add event handlers\n    if (this.config.draggable) {\n      // Keep track pointer hold and dragging distance\n      this.pointerDown = false;\n      this.drag = {\n        startX: 0,\n        endX: 0,\n        startY: 0,\n        letItGo: null,\n        preventClick: false,\n      };\n\n      // Touch events\n      this.selector.addEventListener('touchstart', this.touchstartHandler);\n      this.selector.addEventListener('touchend', this.touchendHandler);\n      this.selector.addEventListener('touchmove', this.touchmoveHandler);\n\n      // Mouse events\n      this.selector.addEventListener('mousedown', this.mousedownHandler);\n      this.selector.addEventListener('mouseup', this.mouseupHandler);\n      this.selector.addEventListener('mouseleave', this.mouseleaveHandler);\n      this.selector.addEventListener('mousemove', this.mousemoveHandler);\n\n      // Click\n      this.selector.addEventListener('click', this.clickHandler);\n    }\n  }\n\n\n  /**\n   * Detaches listeners from required events.\n   */\n  detachEvents() {\n    window.removeEventListener('resize', this.resizeHandler);\n    this.selector.removeEventListener('touchstart', this.touchstartHandler);\n    this.selector.removeEventListener('touchend', this.touchendHandler);\n    this.selector.removeEventListener('touchmove', this.touchmoveHandler);\n    this.selector.removeEventListener('mousedown', this.mousedownHandler);\n    this.selector.removeEventListener('mouseup', this.mouseupHandler);\n    this.selector.removeEventListener('mouseleave', this.mouseleaveHandler);\n    this.selector.removeEventListener('mousemove', this.mousemoveHandler);\n    this.selector.removeEventListener('click', this.clickHandler);\n  }\n\n\n  /**\n   * Builds the markup and attaches listeners to required events.\n   */\n  init() {\n    this.attachEvents();\n\n    // hide everything out of selector's boundaries\n    this.selector.style.overflow = 'hidden';\n\n    // rtl or ltr\n    this.selector.style.direction = this.config.rtl ? 'rtl' : 'ltr';\n\n    // build a frame and slide to a currentSlide\n    this.buildSliderFrame();\n\n    this.config.onInit.call(this);\n  }\n\n\n  /**\n   * Build a sliderFrame and slide to a current item.\n   */\n  buildSliderFrame() {\n    const widthItem = this.selectorWidth / this.perPage;\n    const itemsToBuild = this.config.loop ? this.innerElements.length + (2 * this.perPage) : this.innerElements.length;\n\n    // Create frame and apply styling\n    this.sliderFrame = document.createElement('div');\n    this.sliderFrame.style.width = `${widthItem * itemsToBuild}px`;\n    this.enableTransition();\n\n    if (this.config.draggable) {\n      this.selector.style.cursor = '-webkit-grab';\n    }\n\n    // Create a document fragment to put slides into it\n    const docFragment = document.createDocumentFragment();\n\n    // Loop through the slides, add styling and add them to document fragment\n    if (this.config.loop) {\n      for (let i = this.innerElements.length - this.perPage; i < this.innerElements.length; i++) {\n        const element = this.buildSliderFrameItem(this.innerElements[i].cloneNode(true));\n        docFragment.appendChild(element);\n      }\n    }\n    for (let i = 0; i < this.innerElements.length; i++) {\n      const element = this.buildSliderFrameItem(this.innerElements[i]);\n      docFragment.appendChild(element);\n    }\n    if (this.config.loop) {\n      for (let i = 0; i < this.perPage; i++) {\n        const element = this.buildSliderFrameItem(this.innerElements[i].cloneNode(true));\n        docFragment.appendChild(element);\n      }\n    }\n\n    // Add fragment to the frame\n    this.sliderFrame.appendChild(docFragment);\n\n    // Clear selector (just in case something is there) and insert a frame\n    this.selector.innerHTML = '';\n    this.selector.appendChild(this.sliderFrame);\n\n    // Go to currently active slide after initial build\n    this.slideToCurrent();\n  }\n\n  buildSliderFrameItem(elm) {\n    const elementContainer = document.createElement('div');\n    elementContainer.style.cssFloat = this.config.rtl ? 'right' : 'left';\n    elementContainer.style.float = this.config.rtl ? 'right' : 'left';\n    elementContainer.style.width = `${this.config.loop ? 100 / (this.innerElements.length + (this.perPage * 2)) : 100 / (this.innerElements.length)}%`;\n    elementContainer.appendChild(elm);\n    return elementContainer;\n  }\n\n\n  /**\n   * Determinates slides number accordingly to clients viewport.\n   */\n  resolveSlidesNumber() {\n    if (typeof this.config.perPage === 'number') {\n      this.perPage = this.config.perPage;\n    }\n    else if (typeof this.config.perPage === 'object') {\n      this.perPage = 1;\n      for (const viewport in this.config.perPage) {\n        if (window.innerWidth >= viewport) {\n          this.perPage = this.config.perPage[viewport];\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Go to previous slide.\n   * @param {number} [howManySlides=1] - How many items to slide backward.\n   * @param {function} callback - Optional callback function.\n   */\n  prev(howManySlides = 1, callback) {\n    // early return when there is nothing to slide\n    if (this.innerElements.length <= this.perPage) {\n      return;\n    }\n\n    const beforeChange = this.currentSlide;\n\n    if (this.config.loop) {\n      const isNewIndexClone = this.currentSlide - howManySlides < 0;\n      if (isNewIndexClone) {\n        this.disableTransition();\n\n        const mirrorSlideIndex = this.currentSlide + this.innerElements.length;\n        const mirrorSlideIndexOffset = this.perPage;\n        const moveTo = mirrorSlideIndex + mirrorSlideIndexOffset;\n        const offset = (this.config.rtl ? 1 : -1) * moveTo * (this.selectorWidth / this.perPage);\n        const dragDistance = this.config.draggable ? this.drag.endX - this.drag.startX : 0;\n\n        this.sliderFrame.style[this.transformProperty] = `translate3d(${offset + dragDistance}px, 0, 0)`;\n        this.currentSlide = mirrorSlideIndex - howManySlides;\n      }\n      else {\n        this.currentSlide = this.currentSlide - howManySlides;\n      }\n    }\n    else {\n      this.currentSlide = Math.max(this.currentSlide - howManySlides, 0);\n    }\n\n    if (beforeChange !== this.currentSlide) {\n      this.slideToCurrent(this.config.loop);\n      this.config.onChange.call(this);\n      if (callback) {\n        callback.call(this);\n      }\n    }\n  }\n\n\n  /**\n   * Go to next slide.\n   * @param {number} [howManySlides=1] - How many items to slide forward.\n   * @param {function} callback - Optional callback function.\n   */\n  next(howManySlides = 1, callback) {\n    // early return when there is nothing to slide\n    if (this.innerElements.length <= this.perPage) {\n      return;\n    }\n\n    const beforeChange = this.currentSlide;\n\n    if (this.config.loop) {\n      const isNewIndexClone = this.currentSlide + howManySlides > this.innerElements.length - this.perPage;\n      if (isNewIndexClone) {\n        this.disableTransition();\n\n        const mirrorSlideIndex = this.currentSlide - this.innerElements.length;\n        const mirrorSlideIndexOffset = this.perPage;\n        const moveTo = mirrorSlideIndex + mirrorSlideIndexOffset;\n        const offset = (this.config.rtl ? 1 : -1) * moveTo * (this.selectorWidth / this.perPage);\n        const dragDistance = this.config.draggable ? this.drag.endX - this.drag.startX : 0;\n\n        this.sliderFrame.style[this.transformProperty] = `translate3d(${offset + dragDistance}px, 0, 0)`;\n        this.currentSlide = mirrorSlideIndex + howManySlides;\n      }\n      else {\n        this.currentSlide = this.currentSlide + howManySlides;\n      }\n    }\n    else {\n      this.currentSlide = Math.min(this.currentSlide + howManySlides, this.innerElements.length - this.perPage);\n    }\n    if (beforeChange !== this.currentSlide) {\n      this.slideToCurrent(this.config.loop);\n      this.config.onChange.call(this);\n      if (callback) {\n        callback.call(this);\n      }\n    }\n  }\n\n\n  /**\n   * Disable transition on sliderFrame.\n   */\n  disableTransition() {\n    this.sliderFrame.style.webkitTransition = `all 0ms ${this.config.easing}`;\n    this.sliderFrame.style.transition = `all 0ms ${this.config.easing}`;\n  }\n\n\n  /**\n   * Enable transition on sliderFrame.\n   */\n  enableTransition() {\n    this.sliderFrame.style.webkitTransition = `all ${this.config.duration}ms ${this.config.easing}`;\n    this.sliderFrame.style.transition = `all ${this.config.duration}ms ${this.config.easing}`;\n  }\n\n\n  /**\n   * Go to slide with particular index\n   * @param {number} index - Item index to slide to.\n   * @param {function} callback - Optional callback function.\n   */\n  goTo(index, callback) {\n    if (this.innerElements.length <= this.perPage) {\n      return;\n    }\n    const beforeChange = this.currentSlide;\n    this.currentSlide = this.config.loop ?\n      index % this.innerElements.length :\n      Math.min(Math.max(index, 0), this.innerElements.length - this.perPage);\n    if (beforeChange !== this.currentSlide) {\n      this.slideToCurrent();\n      this.config.onChange.call(this);\n      if (callback) {\n        callback.call(this);\n      }\n    }\n  }\n\n\n  /**\n   * Moves sliders frame to position of currently active slide\n   */\n  slideToCurrent(enableTransition) {\n    const currentSlide = this.config.loop ? this.currentSlide + this.perPage : this.currentSlide;\n    const offset = (this.config.rtl ? 1 : -1) * currentSlide * (this.selectorWidth / this.perPage);\n\n    if (enableTransition) {\n      // This one is tricky, I know but this is a perfect explanation:\n      // https://youtu.be/cCOL7MC4Pl0\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          this.enableTransition();\n          this.sliderFrame.style[this.transformProperty] = `translate3d(${offset}px, 0, 0)`;\n        });\n      });\n    }\n    else {\n      this.sliderFrame.style[this.transformProperty] = `translate3d(${offset}px, 0, 0)`;\n    }\n  }\n\n\n  /**\n   * Recalculate drag /swipe event and reposition the frame of a slider\n   */\n  updateAfterDrag() {\n    const movement = (this.config.rtl ? -1 : 1) * (this.drag.endX - this.drag.startX);\n    const movementDistance = Math.abs(movement);\n    const howManySliderToSlide = this.config.multipleDrag ? Math.ceil(movementDistance / (this.selectorWidth / this.perPage)) : 1;\n\n    const slideToNegativeClone = movement > 0 && this.currentSlide - howManySliderToSlide < 0;\n    const slideToPositiveClone = movement < 0 && this.currentSlide + howManySliderToSlide > this.innerElements.length - this.perPage;\n\n    if (movement > 0 && movementDistance > this.config.threshold && this.innerElements.length > this.perPage) {\n      this.prev(howManySliderToSlide);\n    }\n    else if (movement < 0 && movementDistance > this.config.threshold && this.innerElements.length > this.perPage) {\n      this.next(howManySliderToSlide);\n    }\n    this.slideToCurrent(slideToNegativeClone || slideToPositiveClone);\n  }\n\n\n  /**\n   * When window resizes, resize slider components as well\n   */\n  resizeHandler() {\n    // update perPage number dependable of user value\n    this.resolveSlidesNumber();\n\n    // relcalculate currentSlide\n    // prevent hiding items when browser width increases\n    if (this.currentSlide + this.perPage > this.innerElements.length) {\n      this.currentSlide = this.innerElements.length <= this.perPage ? 0 : this.innerElements.length - this.perPage;\n    }\n\n    this.selectorWidth = this.selector.offsetWidth;\n\n    this.buildSliderFrame();\n  }\n\n\n  /**\n   * Clear drag after touchend and mouseup event\n   */\n  clearDrag() {\n    this.drag = {\n      startX: 0,\n      endX: 0,\n      startY: 0,\n      letItGo: null,\n      preventClick: this.drag.preventClick\n    };\n  }\n\n\n  /**\n   * touchstart event handler\n   */\n  touchstartHandler(e) {\n    // Prevent dragging / swiping on inputs, selects and textareas\n    const ignoreSiema = ['TEXTAREA', 'OPTION', 'INPUT', 'SELECT'].indexOf(e.target.nodeName) !== -1;\n    if (ignoreSiema) {\n      return;\n    }\n\n    e.stopPropagation();\n    this.pointerDown = true;\n    this.drag.startX = e.touches[0].pageX;\n    this.drag.startY = e.touches[0].pageY;\n  }\n\n\n  /**\n   * touchend event handler\n   */\n  touchendHandler(e) {\n    e.stopPropagation();\n    this.pointerDown = false;\n    this.enableTransition();\n    if (this.drag.endX) {\n      this.updateAfterDrag();\n    }\n    this.clearDrag();\n  }\n\n\n  /**\n   * touchmove event handler\n   */\n  touchmoveHandler(e) {\n    e.stopPropagation();\n\n    if (this.drag.letItGo === null) {\n      this.drag.letItGo = Math.abs(this.drag.startY - e.touches[0].pageY) < Math.abs(this.drag.startX - e.touches[0].pageX);\n    }\n\n    if (this.pointerDown && this.drag.letItGo) {\n      e.preventDefault();\n      this.drag.endX = e.touches[0].pageX;\n      this.sliderFrame.style.webkitTransition = `all 0ms ${this.config.easing}`;\n      this.sliderFrame.style.transition = `all 0ms ${this.config.easing}`;\n\n      const currentSlide = this.config.loop ? this.currentSlide + this.perPage : this.currentSlide;\n      const currentOffset = currentSlide * (this.selectorWidth / this.perPage);\n      const dragOffset = (this.drag.endX - this.drag.startX);\n      const offset = this.config.rtl ? currentOffset + dragOffset : currentOffset - dragOffset;\n      this.sliderFrame.style[this.transformProperty] = `translate3d(${(this.config.rtl ? 1 : -1) * offset}px, 0, 0)`;\n    }\n  }\n\n\n  /**\n   * mousedown event handler\n   */\n  mousedownHandler(e) {\n    // Prevent dragging / swiping on inputs, selects and textareas\n    const ignoreSiema = ['TEXTAREA', 'OPTION', 'INPUT', 'SELECT'].indexOf(e.target.nodeName) !== -1;\n    if (ignoreSiema) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    this.pointerDown = true;\n    this.drag.startX = e.pageX;\n  }\n\n\n  /**\n   * mouseup event handler\n   */\n  mouseupHandler(e) {\n    e.stopPropagation();\n    this.pointerDown = false;\n    this.selector.style.cursor = '-webkit-grab';\n    this.enableTransition();\n    if (this.drag.endX) {\n      this.updateAfterDrag();\n    }\n    this.clearDrag();\n  }\n\n\n  /**\n   * mousemove event handler\n   */\n  mousemoveHandler(e) {\n    e.preventDefault();\n    if (this.pointerDown) {\n      // if dragged element is a link\n      // mark preventClick prop as a true\n      // to detemine about browser redirection later on\n      if (e.target.nodeName === 'A') {\n        this.drag.preventClick = true;\n      }\n\n      this.drag.endX = e.pageX;\n      this.selector.style.cursor = '-webkit-grabbing';\n      this.sliderFrame.style.webkitTransition = `all 0ms ${this.config.easing}`;\n      this.sliderFrame.style.transition = `all 0ms ${this.config.easing}`;\n\n      const currentSlide = this.config.loop ? this.currentSlide + this.perPage : this.currentSlide;\n      const currentOffset = currentSlide * (this.selectorWidth / this.perPage);\n      const dragOffset = (this.drag.endX - this.drag.startX);\n      const offset = this.config.rtl ? currentOffset + dragOffset : currentOffset - dragOffset;\n      this.sliderFrame.style[this.transformProperty] = `translate3d(${(this.config.rtl ? 1 : -1) * offset}px, 0, 0)`;\n    }\n  }\n\n\n  /**\n   * mouseleave event handler\n   */\n  mouseleaveHandler(e) {\n    if (this.pointerDown) {\n      this.pointerDown = false;\n      this.selector.style.cursor = '-webkit-grab';\n      this.drag.endX = e.pageX;\n      this.drag.preventClick = false;\n      this.enableTransition();\n      this.updateAfterDrag();\n      this.clearDrag();\n    }\n  }\n\n\n  /**\n   * click event handler\n   */\n  clickHandler(e) {\n    // if the dragged element is a link\n    // prevent browsers from folowing the link\n    if (this.drag.preventClick) {\n      e.preventDefault();\n    }\n    this.drag.preventClick = false;\n  }\n\n\n  /**\n   * Remove item from carousel.\n   * @param {number} index - Item index to remove.\n   * @param {function} callback - Optional callback to call after remove.\n   */\n  remove(index, callback) {\n    if (index < 0 || index >= this.innerElements.length) {\n      throw new Error('Item to remove doesn\\'t exist ðŸ˜­');\n    }\n\n    // Shift sliderFrame back by one item when:\n    // 1. Item with lower index than currenSlide is removed.\n    // 2. Last item is removed.\n    const lowerIndex = index < this.currentSlide;\n    const lastItem = this.currentSlide + this.perPage - 1 === index;\n\n    if (lowerIndex || lastItem) {\n      this.currentSlide--;\n    }\n\n    this.innerElements.splice(index, 1);\n\n    // build a frame and slide to a currentSlide\n    this.buildSliderFrame();\n\n    if (callback) {\n      callback.call(this);\n    }\n  }\n\n\n  /**\n   * Insert item to carousel at particular index.\n   * @param {HTMLElement} item - Item to insert.\n   * @param {number} index - Index of new new item insertion.\n   * @param {function} callback - Optional callback to call after insert.\n   */\n  insert(item, index, callback) {\n    if (index < 0 || index > this.innerElements.length + 1) {\n      throw new Error('Unable to inset it at this index ðŸ˜­');\n    }\n    if (this.innerElements.indexOf(item) !== -1) {\n      throw new Error('The same item in a carousel? Really? Nope ðŸ˜­');\n    }\n\n    // Avoid shifting content\n    const shouldItShift = index <= this.currentSlide > 0 && this.innerElements.length;\n    this.currentSlide = shouldItShift ? this.currentSlide + 1 : this.currentSlide;\n\n    this.innerElements.splice(index, 0, item);\n\n    // build a frame and slide to a currentSlide\n    this.buildSliderFrame();\n\n    if (callback) {\n      callback.call(this);\n    }\n  }\n\n\n  /**\n   * Prepernd item to carousel.\n   * @param {HTMLElement} item - Item to prepend.\n   * @param {function} callback - Optional callback to call after prepend.\n   */\n  prepend(item, callback) {\n    this.insert(item, 0);\n    if (callback) {\n      callback.call(this);\n    }\n  }\n\n\n  /**\n   * Append item to carousel.\n   * @param {HTMLElement} item - Item to append.\n   * @param {function} callback - Optional callback to call after append.\n   */\n  append(item, callback) {\n    this.insert(item, this.innerElements.length + 1);\n    if (callback) {\n      callback.call(this);\n    }\n  }\n\n\n  /**\n   * Removes listeners and optionally restores to initial markup\n   * @param {boolean} restoreMarkup - Determinants about restoring an initial markup.\n   * @param {function} callback - Optional callback function.\n   */\n  destroy(restoreMarkup = false, callback) {\n    this.detachEvents();\n\n    this.selector.style.cursor = 'auto';\n\n    if (restoreMarkup) {\n      const slides = document.createDocumentFragment();\n      for (let i = 0; i < this.innerElements.length; i++) {\n        slides.appendChild(this.innerElements[i]);\n      }\n      this.selector.innerHTML = '';\n      this.selector.appendChild(slides);\n      this.selector.removeAttribute('style');\n    }\n\n    if (callback) {\n      callback.call(this);\n    }\n  }\n}\n"],"names":["Siema","options","config","mergeSettings","selector","document","querySelector","Error","resolveSlidesNumber","selectorWidth","offsetWidth","innerElements","slice","call","children","currentSlide","loop","startIndex","length","Math","max","min","perPage","transformProperty","webkitOrNot","forEach","method","bind","init","addEventListener","resizeHandler","draggable","pointerDown","drag","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler","removeEventListener","attachEvents","style","overflow","direction","rtl","buildSliderFrame","onInit","widthItem","itemsToBuild","sliderFrame","createElement","width","enableTransition","cursor","docFragment","createDocumentFragment","i","element","buildSliderFrameItem","cloneNode","appendChild","innerHTML","slideToCurrent","elm","elementContainer","cssFloat","float","viewport","window","innerWidth","howManySlides","callback","beforeChange","isNewIndexClone","disableTransition","mirrorSlideIndex","mirrorSlideIndexOffset","moveTo","offset","dragDistance","endX","startX","onChange","webkitTransition","easing","transition","duration","index","movement","movementDistance","abs","howManySliderToSlide","multipleDrag","ceil","slideToNegativeClone","slideToPositiveClone","threshold","prev","next","preventClick","e","ignoreSiema","indexOf","target","nodeName","stopPropagation","touches","pageX","startY","pageY","updateAfterDrag","clearDrag","letItGo","preventDefault","currentOffset","dragOffset","lowerIndex","lastItem","splice","item","shouldItShift","insert","restoreMarkup","detachEvents","slides","removeAttribute","settings","userSttings","attrname","documentElement","transform"],"mappings":";;;;;;;;;IAGqBA;;;;;iBAKPC,OAAZ,EAAqB;;;;;;SAEdC,MAAL,GAAcF,MAAMG,aAAN,CAAoBF,OAApB,CAAd;;;SAGKG,QAAL,GAAgB,OAAO,KAAKF,MAAL,CAAYE,QAAnB,KAAgC,QAAhC,GAA2CC,SAASC,aAAT,CAAuB,KAAKJ,MAAL,CAAYE,QAAnC,CAA3C,GAA0F,KAAKF,MAAL,CAAYE,QAAtH;;;QAGI,KAAKA,QAAL,KAAkB,IAAtB,EAA4B;YACpB,IAAIG,KAAJ,CAAU,uCAAV,CAAN;;;;SAIGC,mBAAL;;;SAGKC,aAAL,GAAqB,KAAKL,QAAL,CAAcM,WAAnC;SACKC,aAAL,GAAqB,GAAGC,KAAH,CAASC,IAAT,CAAc,KAAKT,QAAL,CAAcU,QAA5B,CAArB;SACKC,YAAL,GAAoB,KAAKb,MAAL,CAAYc,IAAZ,GAClB,KAAKd,MAAL,CAAYe,UAAZ,GAAyB,KAAKN,aAAL,CAAmBO,MAD1B,GAElBC,KAAKC,GAAL,CAAS,CAAT,EAAYD,KAAKE,GAAL,CAAS,KAAKnB,MAAL,CAAYe,UAArB,EAAiC,KAAKN,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAAlE,CAAZ,CAFF;SAGKC,iBAAL,GAAyBvB,MAAMwB,WAAN,EAAzB;;;KAGC,eAAD,EAAkB,mBAAlB,EAAuC,iBAAvC,EAA0D,kBAA1D,EAA8E,kBAA9E,EAAkG,gBAAlG,EAAoH,mBAApH,EAAyI,kBAAzI,EAA6J,cAA7J,EAA6KC,OAA7K,CAAqL,kBAAU;YACxLC,MAAL,IAAe,MAAKA,MAAL,EAAaC,IAAb,OAAf;KADF;;;SAKKC,IAAL;;;;;;;;;;;;;;;;;mCAkDa;;aAENC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKC,aAAvC;;;UAGI,KAAK5B,MAAL,CAAY6B,SAAhB,EAA2B;;aAEpBC,WAAL,GAAmB,KAAnB;aACKC,IAAL,GAAY;kBACF,CADE;gBAEJ,CAFI;kBAGF,CAHE;mBAID,IAJC;wBAKI;SALhB;;;aASK7B,QAAL,CAAcyB,gBAAd,CAA+B,YAA/B,EAA6C,KAAKK,iBAAlD;aACK9B,QAAL,CAAcyB,gBAAd,CAA+B,UAA/B,EAA2C,KAAKM,eAAhD;aACK/B,QAAL,CAAcyB,gBAAd,CAA+B,WAA/B,EAA4C,KAAKO,gBAAjD;;;aAGKhC,QAAL,CAAcyB,gBAAd,CAA+B,WAA/B,EAA4C,KAAKQ,gBAAjD;aACKjC,QAAL,CAAcyB,gBAAd,CAA+B,SAA/B,EAA0C,KAAKS,cAA/C;aACKlC,QAAL,CAAcyB,gBAAd,CAA+B,YAA/B,EAA6C,KAAKU,iBAAlD;aACKnC,QAAL,CAAcyB,gBAAd,CAA+B,WAA/B,EAA4C,KAAKW,gBAAjD;;;aAGKpC,QAAL,CAAcyB,gBAAd,CAA+B,OAA/B,EAAwC,KAAKY,YAA7C;;;;;;;;;;mCAQW;aACNC,mBAAP,CAA2B,QAA3B,EAAqC,KAAKZ,aAA1C;WACK1B,QAAL,CAAcsC,mBAAd,CAAkC,YAAlC,EAAgD,KAAKR,iBAArD;WACK9B,QAAL,CAAcsC,mBAAd,CAAkC,UAAlC,EAA8C,KAAKP,eAAnD;WACK/B,QAAL,CAAcsC,mBAAd,CAAkC,WAAlC,EAA+C,KAAKN,gBAApD;WACKhC,QAAL,CAAcsC,mBAAd,CAAkC,WAAlC,EAA+C,KAAKL,gBAApD;WACKjC,QAAL,CAAcsC,mBAAd,CAAkC,SAAlC,EAA6C,KAAKJ,cAAlD;WACKlC,QAAL,CAAcsC,mBAAd,CAAkC,YAAlC,EAAgD,KAAKH,iBAArD;WACKnC,QAAL,CAAcsC,mBAAd,CAAkC,WAAlC,EAA+C,KAAKF,gBAApD;WACKpC,QAAL,CAAcsC,mBAAd,CAAkC,OAAlC,EAA2C,KAAKD,YAAhD;;;;;;;;;2BAOK;WACAE,YAAL;;;WAGKvC,QAAL,CAAcwC,KAAd,CAAoBC,QAApB,GAA+B,QAA/B;;;WAGKzC,QAAL,CAAcwC,KAAd,CAAoBE,SAApB,GAAgC,KAAK5C,MAAL,CAAY6C,GAAZ,GAAkB,KAAlB,GAA0B,KAA1D;;;WAGKC,gBAAL;;WAEK9C,MAAL,CAAY+C,MAAZ,CAAmBpC,IAAnB,CAAwB,IAAxB;;;;;;;;;uCAOiB;UACXqC,YAAY,KAAKzC,aAAL,GAAqB,KAAKa,OAA5C;UACM6B,eAAe,KAAKjD,MAAL,CAAYc,IAAZ,GAAmB,KAAKL,aAAL,CAAmBO,MAAnB,GAA6B,IAAI,KAAKI,OAAzD,GAAoE,KAAKX,aAAL,CAAmBO,MAA5G;;;WAGKkC,WAAL,GAAmB/C,SAASgD,aAAT,CAAuB,KAAvB,CAAnB;WACKD,WAAL,CAAiBR,KAAjB,CAAuBU,KAAvB,GAAkCJ,YAAYC,YAA9C;WACKI,gBAAL;;UAEI,KAAKrD,MAAL,CAAY6B,SAAhB,EAA2B;aACpB3B,QAAL,CAAcwC,KAAd,CAAoBY,MAApB,GAA6B,cAA7B;;;;UAIIC,cAAcpD,SAASqD,sBAAT,EAApB;;;UAGI,KAAKxD,MAAL,CAAYc,IAAhB,EAAsB;aACf,IAAI2C,IAAI,KAAKhD,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAA9C,EAAuDqC,IAAI,KAAKhD,aAAL,CAAmBO,MAA9E,EAAsFyC,GAAtF,EAA2F;cACnFC,UAAU,KAAKC,oBAAL,CAA0B,KAAKlD,aAAL,CAAmBgD,CAAnB,EAAsBG,SAAtB,CAAgC,IAAhC,CAA1B,CAAhB;sBACYC,WAAZ,CAAwBH,OAAxB;;;WAGC,IAAID,KAAI,CAAb,EAAgBA,KAAI,KAAKhD,aAAL,CAAmBO,MAAvC,EAA+CyC,IAA/C,EAAoD;YAC5CC,WAAU,KAAKC,oBAAL,CAA0B,KAAKlD,aAAL,CAAmBgD,EAAnB,CAA1B,CAAhB;oBACYI,WAAZ,CAAwBH,QAAxB;;UAEE,KAAK1D,MAAL,CAAYc,IAAhB,EAAsB;aACf,IAAI2C,MAAI,CAAb,EAAgBA,MAAI,KAAKrC,OAAzB,EAAkCqC,KAAlC,EAAuC;cAC/BC,YAAU,KAAKC,oBAAL,CAA0B,KAAKlD,aAAL,CAAmBgD,GAAnB,EAAsBG,SAAtB,CAAgC,IAAhC,CAA1B,CAAhB;sBACYC,WAAZ,CAAwBH,SAAxB;;;;;WAKCR,WAAL,CAAiBW,WAAjB,CAA6BN,WAA7B;;;WAGKrD,QAAL,CAAc4D,SAAd,GAA0B,EAA1B;WACK5D,QAAL,CAAc2D,WAAd,CAA0B,KAAKX,WAA/B;;;WAGKa,cAAL;;;;yCAGmBC,KAAK;UAClBC,mBAAmB9D,SAASgD,aAAT,CAAuB,KAAvB,CAAzB;uBACiBT,KAAjB,CAAuBwB,QAAvB,GAAkC,KAAKlE,MAAL,CAAY6C,GAAZ,GAAkB,OAAlB,GAA4B,MAA9D;uBACiBH,KAAjB,CAAuByB,KAAvB,GAA+B,KAAKnE,MAAL,CAAY6C,GAAZ,GAAkB,OAAlB,GAA4B,MAA3D;uBACiBH,KAAjB,CAAuBU,KAAvB,IAAkC,KAAKpD,MAAL,CAAYc,IAAZ,GAAmB,OAAO,KAAKL,aAAL,CAAmBO,MAAnB,GAA6B,KAAKI,OAAL,GAAe,CAAnD,CAAnB,GAA4E,MAAO,KAAKX,aAAL,CAAmBO,MAAxI;uBACiB6C,WAAjB,CAA6BG,GAA7B;aACOC,gBAAP;;;;;;;;;0CAOoB;UAChB,OAAO,KAAKjE,MAAL,CAAYoB,OAAnB,KAA+B,QAAnC,EAA6C;aACtCA,OAAL,GAAe,KAAKpB,MAAL,CAAYoB,OAA3B;OADF,MAGK,IAAI,QAAO,KAAKpB,MAAL,CAAYoB,OAAnB,MAA+B,QAAnC,EAA6C;aAC3CA,OAAL,GAAe,CAAf;aACK,IAAMgD,QAAX,IAAuB,KAAKpE,MAAL,CAAYoB,OAAnC,EAA4C;cACtCiD,OAAOC,UAAP,IAAqBF,QAAzB,EAAmC;iBAC5BhD,OAAL,GAAe,KAAKpB,MAAL,CAAYoB,OAAZ,CAAoBgD,QAApB,CAAf;;;;;;;;;;;;;;2BAY0B;UAA7BG,aAA6B,uEAAb,CAAa;UAAVC,QAAU;;;UAE5B,KAAK/D,aAAL,CAAmBO,MAAnB,IAA6B,KAAKI,OAAtC,EAA+C;;;;UAIzCqD,eAAe,KAAK5D,YAA1B;;UAEI,KAAKb,MAAL,CAAYc,IAAhB,EAAsB;YACd4D,kBAAkB,KAAK7D,YAAL,GAAoB0D,aAApB,GAAoC,CAA5D;YACIG,eAAJ,EAAqB;eACdC,iBAAL;;cAEMC,mBAAmB,KAAK/D,YAAL,GAAoB,KAAKJ,aAAL,CAAmBO,MAAhE;cACM6D,yBAAyB,KAAKzD,OAApC;cACM0D,SAASF,mBAAmBC,sBAAlC;cACME,SAAS,CAAC,KAAK/E,MAAL,CAAY6C,GAAZ,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,IAA6BiC,MAA7B,IAAuC,KAAKvE,aAAL,GAAqB,KAAKa,OAAjE,CAAf;cACM4D,eAAe,KAAKhF,MAAL,CAAY6B,SAAZ,GAAwB,KAAKE,IAAL,CAAUkD,IAAV,GAAiB,KAAKlD,IAAL,CAAUmD,MAAnD,GAA4D,CAAjF;;eAEKhC,WAAL,CAAiBR,KAAjB,CAAuB,KAAKrB,iBAA5B,sBAAgE0D,SAASC,YAAzE;eACKnE,YAAL,GAAoB+D,mBAAmBL,aAAvC;SAVF,MAYK;eACE1D,YAAL,GAAoB,KAAKA,YAAL,GAAoB0D,aAAxC;;OAfJ,MAkBK;aACE1D,YAAL,GAAoBI,KAAKC,GAAL,CAAS,KAAKL,YAAL,GAAoB0D,aAA7B,EAA4C,CAA5C,CAApB;;;UAGEE,iBAAiB,KAAK5D,YAA1B,EAAwC;aACjCkD,cAAL,CAAoB,KAAK/D,MAAL,CAAYc,IAAhC;aACKd,MAAL,CAAYmF,QAAZ,CAAqBxE,IAArB,CAA0B,IAA1B;YACI6D,QAAJ,EAAc;mBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;;;2BAW4B;UAA7B4D,aAA6B,uEAAb,CAAa;UAAVC,QAAU;;;UAE5B,KAAK/D,aAAL,CAAmBO,MAAnB,IAA6B,KAAKI,OAAtC,EAA+C;;;;UAIzCqD,eAAe,KAAK5D,YAA1B;;UAEI,KAAKb,MAAL,CAAYc,IAAhB,EAAsB;YACd4D,kBAAkB,KAAK7D,YAAL,GAAoB0D,aAApB,GAAoC,KAAK9D,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAA7F;YACIsD,eAAJ,EAAqB;eACdC,iBAAL;;cAEMC,mBAAmB,KAAK/D,YAAL,GAAoB,KAAKJ,aAAL,CAAmBO,MAAhE;cACM6D,yBAAyB,KAAKzD,OAApC;cACM0D,SAASF,mBAAmBC,sBAAlC;cACME,SAAS,CAAC,KAAK/E,MAAL,CAAY6C,GAAZ,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,IAA6BiC,MAA7B,IAAuC,KAAKvE,aAAL,GAAqB,KAAKa,OAAjE,CAAf;cACM4D,eAAe,KAAKhF,MAAL,CAAY6B,SAAZ,GAAwB,KAAKE,IAAL,CAAUkD,IAAV,GAAiB,KAAKlD,IAAL,CAAUmD,MAAnD,GAA4D,CAAjF;;eAEKhC,WAAL,CAAiBR,KAAjB,CAAuB,KAAKrB,iBAA5B,sBAAgE0D,SAASC,YAAzE;eACKnE,YAAL,GAAoB+D,mBAAmBL,aAAvC;SAVF,MAYK;eACE1D,YAAL,GAAoB,KAAKA,YAAL,GAAoB0D,aAAxC;;OAfJ,MAkBK;aACE1D,YAAL,GAAoBI,KAAKE,GAAL,CAAS,KAAKN,YAAL,GAAoB0D,aAA7B,EAA4C,KAAK9D,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAA7E,CAApB;;UAEEqD,iBAAiB,KAAK5D,YAA1B,EAAwC;aACjCkD,cAAL,CAAoB,KAAK/D,MAAL,CAAYc,IAAhC;aACKd,MAAL,CAAYmF,QAAZ,CAAqBxE,IAArB,CAA0B,IAA1B;YACI6D,QAAJ,EAAc;mBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;wCASc;WACbuC,WAAL,CAAiBR,KAAjB,CAAuB0C,gBAAvB,gBAAqD,KAAKpF,MAAL,CAAYqF,MAAjE;WACKnC,WAAL,CAAiBR,KAAjB,CAAuB4C,UAAvB,gBAA+C,KAAKtF,MAAL,CAAYqF,MAA3D;;;;;;;;;uCAOiB;WACZnC,WAAL,CAAiBR,KAAjB,CAAuB0C,gBAAvB,YAAiD,KAAKpF,MAAL,CAAYuF,QAA7D,WAA2E,KAAKvF,MAAL,CAAYqF,MAAvF;WACKnC,WAAL,CAAiBR,KAAjB,CAAuB4C,UAAvB,YAA2C,KAAKtF,MAAL,CAAYuF,QAAvD,WAAqE,KAAKvF,MAAL,CAAYqF,MAAjF;;;;;;;;;;;yBASGG,OAAOhB,UAAU;UAChB,KAAK/D,aAAL,CAAmBO,MAAnB,IAA6B,KAAKI,OAAtC,EAA+C;;;UAGzCqD,eAAe,KAAK5D,YAA1B;WACKA,YAAL,GAAoB,KAAKb,MAAL,CAAYc,IAAZ,GAClB0E,QAAQ,KAAK/E,aAAL,CAAmBO,MADT,GAElBC,KAAKE,GAAL,CAASF,KAAKC,GAAL,CAASsE,KAAT,EAAgB,CAAhB,CAAT,EAA6B,KAAK/E,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAA9D,CAFF;UAGIqD,iBAAiB,KAAK5D,YAA1B,EAAwC;aACjCkD,cAAL;aACK/D,MAAL,CAAYmF,QAAZ,CAAqBxE,IAArB,CAA0B,IAA1B;YACI6D,QAAJ,EAAc;mBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;mCASS0C,kBAAkB;;;UACzBxC,eAAe,KAAKb,MAAL,CAAYc,IAAZ,GAAmB,KAAKD,YAAL,GAAoB,KAAKO,OAA5C,GAAsD,KAAKP,YAAhF;UACMkE,SAAS,CAAC,KAAK/E,MAAL,CAAY6C,GAAZ,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,IAA6BhC,YAA7B,IAA6C,KAAKN,aAAL,GAAqB,KAAKa,OAAvE,CAAf;;UAEIiC,gBAAJ,EAAsB;;;8BAGE,YAAM;gCACJ,YAAM;mBACrBA,gBAAL;mBACKH,WAAL,CAAiBR,KAAjB,CAAuB,OAAKrB,iBAA5B,qBAAgE0D,MAAhE;WAFF;SADF;OAHF,MAUK;aACE7B,WAAL,CAAiBR,KAAjB,CAAuB,KAAKrB,iBAA5B,qBAAgE0D,MAAhE;;;;;;;;;;sCAQc;UACVU,WAAW,CAAC,KAAKzF,MAAL,CAAY6C,GAAZ,GAAkB,CAAC,CAAnB,GAAuB,CAAxB,KAA8B,KAAKd,IAAL,CAAUkD,IAAV,GAAiB,KAAKlD,IAAL,CAAUmD,MAAzD,CAAjB;UACMQ,mBAAmBzE,KAAK0E,GAAL,CAASF,QAAT,CAAzB;UACMG,uBAAuB,KAAK5F,MAAL,CAAY6F,YAAZ,GAA2B5E,KAAK6E,IAAL,CAAUJ,oBAAoB,KAAKnF,aAAL,GAAqB,KAAKa,OAA9C,CAAV,CAA3B,GAA+F,CAA5H;;UAEM2E,uBAAuBN,WAAW,CAAX,IAAgB,KAAK5E,YAAL,GAAoB+E,oBAApB,GAA2C,CAAxF;UACMI,uBAAuBP,WAAW,CAAX,IAAgB,KAAK5E,YAAL,GAAoB+E,oBAApB,GAA2C,KAAKnF,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAAzH;;UAEIqE,WAAW,CAAX,IAAgBC,mBAAmB,KAAK1F,MAAL,CAAYiG,SAA/C,IAA4D,KAAKxF,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAAjG,EAA0G;aACnG8E,IAAL,CAAUN,oBAAV;OADF,MAGK,IAAIH,WAAW,CAAX,IAAgBC,mBAAmB,KAAK1F,MAAL,CAAYiG,SAA/C,IAA4D,KAAKxF,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAAjG,EAA0G;aACxG+E,IAAL,CAAUP,oBAAV;;WAEG7B,cAAL,CAAoBgC,wBAAwBC,oBAA5C;;;;;;;;;oCAOc;;WAET1F,mBAAL;;;;UAII,KAAKO,YAAL,GAAoB,KAAKO,OAAzB,GAAmC,KAAKX,aAAL,CAAmBO,MAA1D,EAAkE;aAC3DH,YAAL,GAAoB,KAAKJ,aAAL,CAAmBO,MAAnB,IAA6B,KAAKI,OAAlC,GAA4C,CAA5C,GAAgD,KAAKX,aAAL,CAAmBO,MAAnB,GAA4B,KAAKI,OAArG;;;WAGGb,aAAL,GAAqB,KAAKL,QAAL,CAAcM,WAAnC;;WAEKsC,gBAAL;;;;;;;;;gCAOU;WACLf,IAAL,GAAY;gBACF,CADE;cAEJ,CAFI;gBAGF,CAHE;iBAID,IAJC;sBAKI,KAAKA,IAAL,CAAUqE;OAL1B;;;;;;;;;sCAagBC,GAAG;;UAEbC,cAAc,CAAC,UAAD,EAAa,QAAb,EAAuB,OAAvB,EAAgC,QAAhC,EAA0CC,OAA1C,CAAkDF,EAAEG,MAAF,CAASC,QAA3D,MAAyE,CAAC,CAA9F;UACIH,WAAJ,EAAiB;;;;QAIfI,eAAF;WACK5E,WAAL,GAAmB,IAAnB;WACKC,IAAL,CAAUmD,MAAV,GAAmBmB,EAAEM,OAAF,CAAU,CAAV,EAAaC,KAAhC;WACK7E,IAAL,CAAU8E,MAAV,GAAmBR,EAAEM,OAAF,CAAU,CAAV,EAAaG,KAAhC;;;;;;;;;oCAOcT,GAAG;QACfK,eAAF;WACK5E,WAAL,GAAmB,KAAnB;WACKuB,gBAAL;UACI,KAAKtB,IAAL,CAAUkD,IAAd,EAAoB;aACb8B,eAAL;;WAEGC,SAAL;;;;;;;;;qCAOeX,GAAG;QAChBK,eAAF;;UAEI,KAAK3E,IAAL,CAAUkF,OAAV,KAAsB,IAA1B,EAAgC;aACzBlF,IAAL,CAAUkF,OAAV,GAAoBhG,KAAK0E,GAAL,CAAS,KAAK5D,IAAL,CAAU8E,MAAV,GAAmBR,EAAEM,OAAF,CAAU,CAAV,EAAaG,KAAzC,IAAkD7F,KAAK0E,GAAL,CAAS,KAAK5D,IAAL,CAAUmD,MAAV,GAAmBmB,EAAEM,OAAF,CAAU,CAAV,EAAaC,KAAzC,CAAtE;;;UAGE,KAAK9E,WAAL,IAAoB,KAAKC,IAAL,CAAUkF,OAAlC,EAA2C;UACvCC,cAAF;aACKnF,IAAL,CAAUkD,IAAV,GAAiBoB,EAAEM,OAAF,CAAU,CAAV,EAAaC,KAA9B;aACK1D,WAAL,CAAiBR,KAAjB,CAAuB0C,gBAAvB,gBAAqD,KAAKpF,MAAL,CAAYqF,MAAjE;aACKnC,WAAL,CAAiBR,KAAjB,CAAuB4C,UAAvB,gBAA+C,KAAKtF,MAAL,CAAYqF,MAA3D;;YAEMxE,eAAe,KAAKb,MAAL,CAAYc,IAAZ,GAAmB,KAAKD,YAAL,GAAoB,KAAKO,OAA5C,GAAsD,KAAKP,YAAhF;YACMsG,gBAAgBtG,gBAAgB,KAAKN,aAAL,GAAqB,KAAKa,OAA1C,CAAtB;YACMgG,aAAc,KAAKrF,IAAL,CAAUkD,IAAV,GAAiB,KAAKlD,IAAL,CAAUmD,MAA/C;YACMH,SAAS,KAAK/E,MAAL,CAAY6C,GAAZ,GAAkBsE,gBAAgBC,UAAlC,GAA+CD,gBAAgBC,UAA9E;aACKlE,WAAL,CAAiBR,KAAjB,CAAuB,KAAKrB,iBAA5B,qBAAgE,CAAC,KAAKrB,MAAL,CAAY6C,GAAZ,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,IAA6BkC,MAA7F;;;;;;;;;;qCAQasB,GAAG;;UAEZC,cAAc,CAAC,UAAD,EAAa,QAAb,EAAuB,OAAvB,EAAgC,QAAhC,EAA0CC,OAA1C,CAAkDF,EAAEG,MAAF,CAASC,QAA3D,MAAyE,CAAC,CAA9F;UACIH,WAAJ,EAAiB;;;;QAIfY,cAAF;QACER,eAAF;WACK5E,WAAL,GAAmB,IAAnB;WACKC,IAAL,CAAUmD,MAAV,GAAmBmB,EAAEO,KAArB;;;;;;;;;mCAOaP,GAAG;QACdK,eAAF;WACK5E,WAAL,GAAmB,KAAnB;WACK5B,QAAL,CAAcwC,KAAd,CAAoBY,MAApB,GAA6B,cAA7B;WACKD,gBAAL;UACI,KAAKtB,IAAL,CAAUkD,IAAd,EAAoB;aACb8B,eAAL;;WAEGC,SAAL;;;;;;;;;qCAOeX,GAAG;QAChBa,cAAF;UACI,KAAKpF,WAAT,EAAsB;;;;YAIhBuE,EAAEG,MAAF,CAASC,QAAT,KAAsB,GAA1B,EAA+B;eACxB1E,IAAL,CAAUqE,YAAV,GAAyB,IAAzB;;;aAGGrE,IAAL,CAAUkD,IAAV,GAAiBoB,EAAEO,KAAnB;aACK1G,QAAL,CAAcwC,KAAd,CAAoBY,MAApB,GAA6B,kBAA7B;aACKJ,WAAL,CAAiBR,KAAjB,CAAuB0C,gBAAvB,gBAAqD,KAAKpF,MAAL,CAAYqF,MAAjE;aACKnC,WAAL,CAAiBR,KAAjB,CAAuB4C,UAAvB,gBAA+C,KAAKtF,MAAL,CAAYqF,MAA3D;;YAEMxE,eAAe,KAAKb,MAAL,CAAYc,IAAZ,GAAmB,KAAKD,YAAL,GAAoB,KAAKO,OAA5C,GAAsD,KAAKP,YAAhF;YACMsG,gBAAgBtG,gBAAgB,KAAKN,aAAL,GAAqB,KAAKa,OAA1C,CAAtB;YACMgG,aAAc,KAAKrF,IAAL,CAAUkD,IAAV,GAAiB,KAAKlD,IAAL,CAAUmD,MAA/C;YACMH,SAAS,KAAK/E,MAAL,CAAY6C,GAAZ,GAAkBsE,gBAAgBC,UAAlC,GAA+CD,gBAAgBC,UAA9E;aACKlE,WAAL,CAAiBR,KAAjB,CAAuB,KAAKrB,iBAA5B,qBAAgE,CAAC,KAAKrB,MAAL,CAAY6C,GAAZ,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,IAA6BkC,MAA7F;;;;;;;;;;sCAQcsB,GAAG;UACf,KAAKvE,WAAT,EAAsB;aACfA,WAAL,GAAmB,KAAnB;aACK5B,QAAL,CAAcwC,KAAd,CAAoBY,MAApB,GAA6B,cAA7B;aACKvB,IAAL,CAAUkD,IAAV,GAAiBoB,EAAEO,KAAnB;aACK7E,IAAL,CAAUqE,YAAV,GAAyB,KAAzB;aACK/C,gBAAL;aACK0D,eAAL;aACKC,SAAL;;;;;;;;;;iCAQSX,GAAG;;;UAGV,KAAKtE,IAAL,CAAUqE,YAAd,EAA4B;UACxBc,cAAF;;WAEGnF,IAAL,CAAUqE,YAAV,GAAyB,KAAzB;;;;;;;;;;;2BASKZ,OAAOhB,UAAU;UAClBgB,QAAQ,CAAR,IAAaA,SAAS,KAAK/E,aAAL,CAAmBO,MAA7C,EAAqD;cAC7C,IAAIX,KAAJ,CAAU,kCAAV,CAAN;;;;;;UAMIgH,aAAa7B,QAAQ,KAAK3E,YAAhC;UACMyG,WAAW,KAAKzG,YAAL,GAAoB,KAAKO,OAAzB,GAAmC,CAAnC,KAAyCoE,KAA1D;;UAEI6B,cAAcC,QAAlB,EAA4B;aACrBzG,YAAL;;;WAGGJ,aAAL,CAAmB8G,MAAnB,CAA0B/B,KAA1B,EAAiC,CAAjC;;;WAGK1C,gBAAL;;UAEI0B,QAAJ,EAAc;iBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;;;2BAWG6G,MAAMhC,OAAOhB,UAAU;UACxBgB,QAAQ,CAAR,IAAaA,QAAQ,KAAK/E,aAAL,CAAmBO,MAAnB,GAA4B,CAArD,EAAwD;cAChD,IAAIX,KAAJ,CAAU,qCAAV,CAAN;;UAEE,KAAKI,aAAL,CAAmB8F,OAAnB,CAA2BiB,IAA3B,MAAqC,CAAC,CAA1C,EAA6C;cACrC,IAAInH,KAAJ,CAAU,8CAAV,CAAN;;;;UAIIoH,gBAAgBjC,SAAS,KAAK3E,YAAd,GAA6B,CAA7B,IAAkC,KAAKJ,aAAL,CAAmBO,MAA3E;WACKH,YAAL,GAAoB4G,gBAAgB,KAAK5G,YAAL,GAAoB,CAApC,GAAwC,KAAKA,YAAjE;;WAEKJ,aAAL,CAAmB8G,MAAnB,CAA0B/B,KAA1B,EAAiC,CAAjC,EAAoCgC,IAApC;;;WAGK1E,gBAAL;;UAEI0B,QAAJ,EAAc;iBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;;4BAUI6G,MAAMhD,UAAU;WACjBkD,MAAL,CAAYF,IAAZ,EAAkB,CAAlB;UACIhD,QAAJ,EAAc;iBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;;2BAUG6G,MAAMhD,UAAU;WAChBkD,MAAL,CAAYF,IAAZ,EAAkB,KAAK/G,aAAL,CAAmBO,MAAnB,GAA4B,CAA9C;UACIwD,QAAJ,EAAc;iBACH7D,IAAT,CAAc,IAAd;;;;;;;;;;;;8BAUqC;UAAjCgH,aAAiC,uEAAjB,KAAiB;UAAVnD,QAAU;;WAClCoD,YAAL;;WAEK1H,QAAL,CAAcwC,KAAd,CAAoBY,MAApB,GAA6B,MAA7B;;UAEIqE,aAAJ,EAAmB;YACXE,SAAS1H,SAASqD,sBAAT,EAAf;aACK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKhD,aAAL,CAAmBO,MAAvC,EAA+CyC,GAA/C,EAAoD;iBAC3CI,WAAP,CAAmB,KAAKpD,aAAL,CAAmBgD,CAAnB,CAAnB;;aAEGvD,QAAL,CAAc4D,SAAd,GAA0B,EAA1B;aACK5D,QAAL,CAAc2D,WAAd,CAA0BgE,MAA1B;aACK3H,QAAL,CAAc4H,eAAd,CAA8B,OAA9B;;;UAGEtD,QAAJ,EAAc;iBACH7D,IAAT,CAAc,IAAd;;;;;kCAnoBiBZ,SAAS;UACtBgI,WAAW;kBACL,QADK;kBAEL,GAFK;gBAGP,UAHO;iBAIN,CAJM;oBAKH,CALG;mBAMJ,IANI;sBAOD,IAPC;mBAQJ,EARI;cAST,KATS;aAUV,KAVU;gBAWP,kBAAM,EAXC;kBAYL,oBAAM;OAZlB;;UAeMC,cAAcjI,OAApB;WACK,IAAMkI,QAAX,IAAuBD,WAAvB,EAAoC;iBACzBC,QAAT,IAAqBD,YAAYC,QAAZ,CAArB;;;aAGKF,QAAP;;;;;;;;;;;kCASmB;UACbrF,QAAQvC,SAAS+H,eAAT,CAAyBxF,KAAvC;UACI,OAAOA,MAAMyF,SAAb,KAA2B,QAA/B,EAAyC;eAChC,WAAP;;aAEK,iBAAP;;;;;;;;;;"}